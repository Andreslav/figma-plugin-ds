"use strict";const e="disclosure",t=function(t){let n=this.parentNode.parentNode.querySelectorAll("li"),l=this.parentNode.classList.contains(e+"--expanded");n.forEach(t=>{t.classList.remove(e+"--expanded")}),this.parentNode.classList.add(e+"--expanded"),l&&this.parentNode.classList.remove(e+"--expanded")},n="select-menu";let l,s,a,i,o=!1;const c=function(e){a+=6,e.style.display="none",-1!=e.selectedIndex&&(e.options[e.selectedIndex].selected=!0);let t=document.createElement("div");t.className=n,e.parentNode.insertBefore(t,e),t.appendChild(e);let l,i=e.getAttribute("icon"),o=document.createElement("button"),c=document.createElement("span"),r=document.createElement("span");i&&(l=document.createElement("span"),l.className="icon "+i),o.className="select-menu__button",c.className="select-menu__label",r.className="select-menu__caret",-1!=e.selectedIndex?(c.textContent=e.options[e.selectedIndex].text,e.options[e.selectedIndex].hasAttribute("value")||c.classList.add("select-menu__label--placeholder")):(c.textContent="No items to display",c.classList.add("select-menu__label--placeholder")),s=document.createElement("ul"),s.className="select-menu__menu",t.appendChild(o),t.appendChild(s),l&&o.appendChild(l),o.appendChild(c),o.appendChild(r),o.addEventListener("click",d,!1)},r=function(e){if(e.hasAttribute("value")){let t=document.createElement("li"),n=document.createElement("span"),l=document.createElement("span");if(t.className="select-menu__item",n.className="select-menu__item-icon",l.className="select-menu__item-label",t.appendChild(n),t.appendChild(l),s.appendChild(t),t.setAttribute("data-value",e.value),l.textContent=e.text,t.setAttribute("position",a),h(t),e.index===i){t.classList.add("select-menu__item--selected");let e=-Math.abs(parseInt(t.getAttribute("position")));s.style.top=e+"px"}t.addEventListener("click",d,!1)}};var d=function(e){if("BUTTON"==this.tagName){if(this.parentNode.querySelector("select").children.length>0){this.classList.toggle("select-menu__button--active");let e=this.parentNode.querySelector("UL");e.classList.toggle("select-menu__menu--active"),p(e)}this.blur()}else if("LI"===this.tagName){let e=this.parentNode.parentNode.querySelector("UL");Array.from(e.getElementsByTagName("LI")).forEach(e=>{e.classList.remove("select-menu__item--selected")}),this.classList.add("select-menu__item--selected");let t=e.parentNode.querySelector("SELECT"),n=this.getAttribute("data-value");t.querySelectorAll("option").forEach(e=>{e.value===n?e.setAttribute("selected","selected"):e.removeAttribute("selected")}),t.value=n;let l=new Event("change");t.dispatchEvent(l);let s=this.parentNode.parentNode.querySelector("BUTTON"),a=s.querySelector(".select-menu__label");a.textContent=this.textContent,a.classList.remove("select-menu__label--placeholder"),s.classList.toggle("select-menu__button--active"),e.classList.toggle("select-menu__menu--active");let i=-Math.abs(parseInt(this.getAttribute("position")));e.style.top=i+"px",p(e)}},u=function(e){e.stopPropagation()},m=function(e){document.querySelectorAll("select.select-menu").forEach(t=>{let n=t.parentNode,l=n.querySelector("UL"),s=n.querySelector("BUTTON");if(l.classList.contains("select-menu__menu--active")){n.contains(e.target)||(l.classList.remove("select-menu__menu--active"),s.classList.remove("select-menu__button--active"))}})};const p=function(e){let t=window.innerHeight-16,n=e.offsetHeight,l=!1,s=e.parentNode.querySelector("BUTTON");n>t&&(e.style.height=t+"px",l=!0);let a=e.getBoundingClientRect(),i=s.getBoundingClientRect();if(a.top<0&&(e.style.top=-Math.abs(i.top-8)+"px"),a.bottom>(window.innerHeight||document.documentElement.clientHeight)){let t=-Math.abs(i.top-(window.innerHeight-n-8)),s=-Math.abs(a.bottom-window.innerHeight+16);e.style.top=l?-Math.abs(i.top-8)+"px":s>t?t+"px":s+"px"}};function h(e){let t=[parseInt(window.getComputedStyle(e,null).getPropertyValue("margin-top")),parseInt(window.getComputedStyle(e,null).getPropertyValue("margin-bottom")),parseInt(window.getComputedStyle(e,null).getPropertyValue("padding-top")),parseInt(window.getComputedStyle(e,null).getPropertyValue("padding-bottom")),parseInt(window.getComputedStyle(e,null).getPropertyValue("height"))];a+=t.reduce((function(e,t){return e+t}),0)}const g={init:function(){1==o&&this.destroy(),l=document.querySelectorAll(".select-menu"),l&&(l.forEach((function(e,t){new MutationObserver((function(e,t){for(let t of e)"childList"===t.type?g.init():"attributes"===t.type&&("value"!==t.attributeName&&"disabled"!==t.attributeName||g.init())})).observe(e,{attributes:!0,childList:!0,subtree:!0}),a=0,c(e),i=e.selectedIndex;let n=Array.from(e.getElementsByTagName("optgroup"));if(0!=n.length){let e=!!n[0].label;n.forEach((function(t,n){if(e){if(0!=n){let e=document.createElement("div");e.className="select-menu__divider",s.appendChild(e),h(e),e.addEventListener("click",u,!1)}let e=document.createElement("div");e.textContent=t.label,e.className="select-menu__divider-label",s.appendChild(e),h(e),e.addEventListener("click",u,!1)}if(n>0&&!e){let e=document.createElement("div");e.className="select-menu__divider",s.appendChild(e),h(e),e.addEventListener("click",u,!1)}Array.from(t.getElementsByTagName("option")).forEach(e=>{r(e)})}))}else Array.from(e.options).forEach(e=>{r(e)})})),document.addEventListener("click",m,!1),o=!0)},destroy:function(){l&&(l.forEach(e=>{let t=e.parentNode;t.querySelector("BUTTON").remove(),t.querySelector("UL").remove(),t.outerHTML=t.innerHTML}),document.removeEventListener("click",m,!1),o=!1)}};(function(){let e=document.querySelectorAll(".disclosure__label");e&&e.forEach(e=>{e.addEventListener("click",t,!1)})})(),g.init();
